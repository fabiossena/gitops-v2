apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: observability

commonLabels:
  app.kubernetes.io/name: grafana

resources:
  - configmap-dashboard-provider.yaml
  - configmap-datasources.yaml
  - secret-admin.yaml
  - deployment.yaml
  - service.yaml
  - ingress.yaml

# Gerar ConfigMap de dashboards a partir dos arquivos JSON
configMapGenerator:
  - name: grafana-dashboards
    files:
      - dashboard-kubernetes-global.json
      - dashboard-kubernetes-node.json
      - dashboard-mysql.json
      - dashboard-postgresql.json